<!DOCTYPE html>
<head>
    <link rel="icon" type="image/svg+xml" sizes="any" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“Š</text></svg>"/>

    <script src="src/d3.v7.min.js" type="text/javascript"></script>
    
    <script src="src/vega.min.js"></script>
    <script src="src/vega-lite.min.js"></script>
    <script src="src/vega-embed.min.js"></script>
    <script src="inflect.js" type="text/javascript"></script>

    <link href="inflectstyle.css" type="text/css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu:regular,bold' rel='stylesheet'>


</head>

<body>
    <div id="vis"> </div>
    <script type="text/javascript">
        // console.log(document.URL)
        // https://github.com/vega/vega-lite-v1/tree/master/data
        if(document.URL.split("#")[1]) {
            var hash_array = document.URL.split("#")[1].split("&");
            var which_definition = hash_array.find(function(d) {return d.includes("vis")})
            var spec = [];
            try {
                var which = which_definition.split("=")[1]
            } catch (error) {
                console.warning("You forgot to define which visualisation to use!")
                var which = "barchart"; //default
            }
        } else {
            var which = "barchart"; //default
        }
    
    
        
        // fetch('vis/column_chart.json')
        fetch('specs/' + which + '.json') //TODO this should be filename, not charttype!
            .then(response => {return response.json()})
            .then(data => spec = data)
            .then(
                function() {
                    
                var result = vegaEmbed("#vis", spec, {mode: "vega-lite"}).then(
                    function() {
                        var vis;
                        vis = new Inflection();	
                        vis.init(which); //barchart or columnchart or scatterplot //TODO this should be charttype!
                    }
                ).catch(console.warn);
                }
            )   

        
        
    </script>
    
    <script>
        // var vis;
        // // var which = document.URL.split("?")[1].split("#")[0];
        // vis = new Inflection();	
        // vis.init("barchart");
        
    </script>
    

</body>

